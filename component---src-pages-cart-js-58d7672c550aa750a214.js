(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{d5pJ:function(t,e,a){"use strict";a.r(e);a("E9XD");var n=a("o0o1"),r=a.n(n),c=(a("ls82"),a("HaE+")),s=a("q1tI"),o=a.n(s),u=a("wtQ5"),i=a("LM7b"),d=a("r6Hh"),l=a("wXFE"),m=a("Zttt"),p=a("LUOC");e.default=function(t){var e=t.location,a=Object(s.useState)(!0),n=a[0],f=a[1],v=Object(s.useState)([]),b=v[0],h=v[1],O=Object(s.useState)(!1),g=O[0],w=O[1],j=Object(s.useState)({}),y=j[0],x=j[1],C=Object(s.useState)({}),E=C[0],S=C[1],_=Object(s.useContext)(l.a).updateCartCount;function k(){return(k=Object(c.a)(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,localStorage.getItem("mcart");case 2:return e=t.sent,t.next=5,p.getCartItems(e).then((function(t){var a=t.data,n=t.meta;h(a),S(e),x(n),f(!1)}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(s.useEffect)((function(){!function(){k.apply(this,arguments)}()}),[]);var I=function(){var t=Object(c.a)(r.a.mark((function t(e){var a,n,c,s,o,u,i,d,l,m,f,v,b,h,O;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,localStorage.getItem("mcart");case 2:return a=t.sent,n=localStorage.getItem("mcustomer"),c=e.id,s=e.email,o=e.card,u=o.name,i=o.address_line1,d=o.address_city,l=o.address_country,m=o.address_state,f=o.address_zip,v=n||{name:u,email:s},b={first_name:u.split(" ")[0],last_name:u.split(" ")[1]||"",line_1:i,city:d,county:m||"",country:l,postcode:f},t.prev=7,t.next=10,p.checkoutCart(a,v,b);case 10:return h=t.sent,O=h.data.id,t.next=14,p.payForOrder(O,c,s);case 14:w(!0),_(0,a),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(7),console.log(t.t0);case 21:case"end":return t.stop()}}),t,null,[[7,18]])})));return function(e){return t.apply(this,arguments)}}(),F={completed:g,items:b,loading:n,cartId:E};return o.a.createElement(m.a,{location:e},o.a.createElement("div",{style:{padding:"100px"}},o.a.createElement(u.a,{title:"Cart"}),o.a.createElement(i.a,Object.assign({},F,{removeFromCart:function(t){return e=t,void p.removeFromCart(e,E).then((function(t){var e=t.data,a=t.meta,n=e.reduce((function(t,e){return t+e.quantity}),0);_(n,E),h(e),x(a)}));var e}})),!n&&!g&&o.a.createElement(d.a,Object.assign({},y,{handleCheckout:I}))))}}}]);
//# sourceMappingURL=component---src-pages-cart-js-58d7672c550aa750a214.js.map