{"version":3,"sources":["webpack:///./src/images/buyuseddevicebanner.png","webpack:///./src/pages/buydevice.js","webpack:///./src/images/readytoupgradebanner.png"],"names":["module","exports","Moltin","require","Cart","location","useState","setLoading","setItems","setMeta","setCartId","useContext","CartContext","updateCartCount","a","localStorage","getItem","cartIdLocal","getCartItems","then","data","meta","useEffect","className","style","paddingBottom","src","buyuseddevicebanner","title","readytoupgradebanner"],"mappings":"+EAAAA,EAAOC,QAAU,IAA0B,mE,qPCWrCC,EAASC,EAAQ,QA6FRC,UA3FF,SAAC,GAAgB,IAAfC,EAAc,EAAdA,SAAc,EACGC,oBAAS,GAAvBC,GADW,aAEDD,mBAAS,IAArBE,GAFa,aAGOF,oBAAS,GAHhB,aAIHA,mBAAS,KAApBG,GAJc,aAKCH,mBAAS,IAAtBI,GALY,WAMDC,qBAAWC,KAA9BC,gBANoB,4CAQ3B,4BAAAC,EAAA,sEAC4BC,aAAaC,QAAQ,SADjD,cACQC,EADR,gBAEQf,EAAOgB,aAAaD,GAAaE,MAAK,YAAmB,IAAjBC,EAAgB,EAAhBA,KAAMC,EAAU,EAAVA,KAClDb,EAASY,GACTV,EAAUO,GACVR,EAAQY,GACRd,GAAW,MANf,4CAR2B,sBAkB3Be,qBAAU,YAlBiB,mCAmBzBJ,KACC,IAsDH,OACE,kBAAC,IAAD,CAAQb,SAAUA,GAChB,6BACM,yBAAKkB,UAAU,SAASC,MAAO,CAACC,cAAc,SAC1D,kBAAC,IAAD,CAAOC,IAAKC,OAEN,kBAAC,IAAD,CAAKC,MAAM,SAEX,gCAAQ,oEAGd,kBAAC,IAAD,CAAOF,IAAKG,U,qBClGZ7B,EAAOC,QAAU,IAA0B,oE","file":"component---src-pages-buydevice-js-86adf8a90bce82a05ec3.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/buyuseddevicebanner-34da49296132a4a66a6469126d637a48.png\";","/* eslint-disable camelcase */\nimport React, {useState, useContext, useEffect} from 'react'\nimport SEO from '../components/SEO'\nimport CartItemList from '../components/CartItemList'\nimport CartSummary from '../components/CartSummary'\nimport CartContext from '../components/Context/CartContext'\nimport Layout from '../components/Layout'\nimport {Image} from 'semantic-ui-react'\nimport buyuseddevicebanner from '../images/buyuseddevicebanner.png'\nimport '../css_overrides/buydevice.css'\nimport readytoupgradebanner from '../images/readytoupgradebanner.png'\nconst Moltin = require('../../lib/moltin')\n\nconst Cart = ({location}) => {\n  const [loading, setLoading] = useState(true)\n  const [items, setItems] = useState([])\n  const [completed, setCompleted] = useState(false)\n  const [meta, setMeta] = useState({})\n  const [cartId, setCartId] = useState({})\n  const {updateCartCount} = useContext(CartContext)\n\n  async function getCartItems() {\n    const cartIdLocal = await localStorage.getItem('mcart')\n    await Moltin.getCartItems(cartIdLocal).then(({data, meta}) => {\n      setItems(data)\n      setCartId(cartIdLocal)\n      setMeta(meta)\n      setLoading(false)\n    })\n  }\n\n  useEffect(() => {\n    getCartItems()\n  }, [])\n\n  const handleCheckout = async data => {\n    const cartId = await localStorage.getItem('mcart')\n    const customerId = localStorage.getItem('mcustomer')\n\n    const {\n      id: token,\n      email,\n      card: {\n        name,\n        address_line1: line_1,\n        address_city: city,\n        address_country: country,\n        address_state: county,\n        address_zip: postcode,\n      },\n    } = data\n\n    const customer = customerId || {name, email}\n\n    const address = {\n      first_name: name.split(' ')[0],\n      last_name: name.split(' ')[1] || '',\n      line_1,\n      city,\n      county: county || '',\n      country,\n      postcode,\n    }\n\n    try {\n      const {\n        data: {id},\n      } = await Moltin.checkoutCart(cartId, customer, address)\n      await Moltin.payForOrder(id, token, email)\n      setCompleted(true)\n      updateCartCount(0, cartId)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  const handleRemoveFromCart = itemId => {\n    Moltin.removeFromCart(itemId, cartId).then(({data, meta}) => {\n      const total = data.reduce((a, c) => a + c.quantity, 0)\n      updateCartCount(total, cartId)\n      setItems(data)\n      setMeta(meta)\n    })\n  }\n\n  const rest = {completed, items, loading, cartId}\n\n  return (\n    <Layout location={location}>\n      <div>\n            <div className=\"banner\" style={{paddingBottom:'50px'}}>\n<Image src={buyuseddevicebanner}></Image>\n</div>\n      <SEO title=\"Cart\" />\n      \n      <center><h2>\nReady to Upgrade? Call 225-454-6851\n</h2></center>\n<Image src={readytoupgradebanner} />\n</div>\n    </Layout>\n  )\n}\n\nexport default Cart\n","module.exports = __webpack_public_path__ + \"static/readytoupgradebanner-7f5736f2e9adec92c424717b97d4a93b.png\";"],"sourceRoot":""}